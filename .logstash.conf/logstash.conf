 input {
  tcp {
    port => 5044
    codec => json            # Assumes incoming messages are JSON formatted
  }
}

filter {
  # Example filter: Add a tag for API logs
  if [type] == "api" {
    mutate {
      add_tag => ["api_log"]
    }
  }

  # Example: Modify fields, rename fields, etc., if necessary
  # mutate {
  #   rename => { "host" => "source_host" }
  # }
}

output {
  # Send logs to Elasticsearch (assuming it is running locally)
elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "api-logs-%{+YYYY.MM.dd}"
  }

  # Optional: Also print to console for debugging
  stdout {
    codec => rubydebug
  }
}
